(function(e,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue")):typeof define=="function"&&define.amd?define(["vue"],m):(e=typeof globalThis<"u"?globalThis:e||self,e["vue-json-component-vue-3"]=m(e.Vue))})(this,function(e){"use strict";const m={class:"json-view-item"},b={key:0},j=["onClick","aria-expanded"],x={class:"properties"},w=["role","tabindex"],N={class:"value-key"},V=e.defineComponent({name:"json-view-item"}),D=Object.assign(V,{props:{data:{required:!0,type:Object},maxDepth:{type:Number,required:!1,default:1},canSelect:{type:Boolean,required:!1,default:!1}},emits:["selected"],setup(t,{emit:i}){const n=t,c=e.ref<boolean>(n.data.depth<n.maxDepth),h=()=>{c.value=!c.value},u=a=>{i("selected",{key:a.key,value:a.value,path:a.path})},g=a=>{i("selected",a)},k=a=>isNaN(a.key)?'"'+a.key+'":':a.key+":",o=a=>{switch(typeof a){case"string":return{color:"var(--vjc-string-color)"};case"number":return{color:"var(--vjc-number-color)"};case"boolean":return{color:"var(--vjc-boolean-color)"};case"object":return{color:"var(--vjc-null-color)"};case"undefined":return{color:"var(--vjc-null-color)"};default:return{color:"var(--vjc-valueKey-color)"}}},s=e.computed(()=>({"chevron-arrow":!0,opened:c.value})),d=e.computed(()=>({"value-key":!0,"can-select":n.canSelect})),l=e.computed(()=>n.data.type==="array"?n.data.length===1?n.data.length+" element":n.data.length+" elements":n.data.length===1?n.data.length+" property":n.data.length+" properties"),p=e.computed(()=>typeof n.data.value>"u"?"undefined":JSON.stringify(n.data.value));return(a,r)=>{const S=e.resolveComponent("json-view-item");return e.openBlock(),e.createElementBlock("div",m,[t.data.type==="object"||t.data.type==="array"?(e.openBlock(),e.createElementBlock("div",b,[e.createElementVNode("button",{onClick:e.withModifiers(h,["stop"]),class:"data-key","aria-expanded":c?"true":"false"},[e.createElementVNode("div",{class:e.normalizeClass(s.value)},null,2),e.createTextVNode(" "+e.toDisplayString(t.data.key)+": ",1),e.createElementVNode("span",x,e.toDisplayString(l.value),1)],8,j),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.data.children,y=>e.withDirectives((e.openBlock(),e.createBlock(S,{onSelected:g,key:k(y),data:y,maxDepth:t.maxDepth,canSelect:t.canSelect},null,8,["data","maxDepth","canSelect"])),[[e.vShow,c]])),128))])):e.createCommentVNode("",!0),t.data.type==="value"?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(d.value),onClick:r[0]||(r[0]=y=>u(t.data)),onKeyup:[r[1]||(r[1]=e.withKeys(y=>u(t.data),["enter"])),r[2]||(r[2]=e.withKeys(y=>u(t.data),["space"]))],role:t.canSelect?"button":void 0,tabindex:t.canSelect?"0":void 0},[e.createElementVNode("span",N,e.toDisplayString(t.data.key)+":",1),e.createElementVNode("span",{style:e.normalizeStyle(o(t.data.value))},e.toDisplayString(p.value),5)],42,w)):e.createCommentVNode("",!0)])}}}),B=e.defineComponent({name:"json-view"}),C=Object.assign(B,{props:{data:{required:!0},rootKey:{type:String,required:!1,default:"root"},maxDepth:{type:Number,required:!1,default:1},colorScheme:{type:String,required:!1,default:"light"}},emits:["selected"],setup(t,{emit:i}){const n=t,c=(o,s,d,l,p)=>{if(h(s)){let a=[];for(let[r,S]of Object.entries(s))a.push(c(r,S,d+1,p?`${l}${o}.`:`${l}`,!0));return{key:o,type:"object",depth:d,path:l,length:a.length,children:a}}else if(u(s)){let a=[];for(let r=0;r<s.length;r++)a.push(c(r.toString(),s[r],d+1,p?`${l}${o}[${r}].`:`${l}`,!1));return{key:o,type:"array",depth:d,path:l,length:a.length,children:a}}else return{key:o,type:"value",path:p?l+o:l.slice(0,-1),depth:d,value:s}},h=o=>typeof o=="object"&&o!==null&&!u(o),u=o=>Array.isArray(o),g=o=>{i("selected",o)},k=e.computed(()=>typeof n.data=="object"?c(n.rootKey,{...n.data},0,"",!0):{key:n.rootKey,type:"value",path:"",depth:0,value:n.data});return(o,s)=>(e.openBlock(),e.createBlock(D,{class:e.normalizeClass([{"root-item":!0,dark:t.colorScheme==="dark"}]),data:k.value,maxDepth:t.maxDepth,onSelected:g},null,8,["class","data","maxDepth"]))}}),$="",f={JSONView:C};return{install(t){for(const i in f)if(f.hasOwnProperty(i)){const n=f[i];t.component(n.name,n)}}}});
